<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AvelineID - Auto Script Generator</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <style>
        body {
            background-color: #f8f9fa;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        .header {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: white;
            padding: 2rem 0;
            margin-bottom: 2rem;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .card {
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 2rem;
            border: none;
        }
        .card-header {
            background-color: #6c757d;
            color: white;
            border-radius: 10px 10px 0 0 !important;
            font-weight: bold;
        }
        .btn-primary {
            background-color: #2575fc;
            border-color: #2575fc;
        }
        .btn-primary:hover {
            background-color: #1a5dc8;
            border-color: #1a5dc8;
        }
        .form-control, .form-select {
            border-radius: 5px;
        }
        .feature-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: #2575fc;
        }
        .feature-card {
            text-align: center;
            padding: 1.5rem;
            transition: transform 0.3s;
        }
        .feature-card:hover {
            transform: translateY(-5px);
        }
        #generatedScript {
            font-family: 'Courier New', Courier, monospace;
            min-height: 400px;
            white-space: pre-wrap;
        }
        .nav-tabs .nav-link.active {
            font-weight: bold;
            color: #2575fc;
            border-bottom: 3px solid #2575fc;
        }
        .tab-content {
            padding: 1.5rem;
            background-color: white;
            border-radius: 0 0 10px 10px;
            border: 1px solid #dee2e6;
            border-top: none;
        }
        .hack-item {
            border-left: 4px solid #2575fc;
            padding-left: 1rem;
            margin-bottom: 1rem;
        }
        .hack-item h5 {
            color: #2575fc;
        }
    </style>
</head>
<body>
    <div class="header text-center">
        <div class="container">
            <h1><i class="bi bi-magic"></i> AvelineID - Auto Script Generator</h1>
            <p class="lead">Generate GameGuardian Lua scripts with custom features using our template</p>
        </div>
    </div>

    <div class="container">
        <div class="row mb-4">
            <div class="col-md-4 mb-4">
                <div class="card feature-card h-100">
                    <div class="feature-icon">
                        <i class="bi bi-file-earmark-code"></i>
                    </div>
                    <h4>Template-Based</h4>
                    <p>Uses a proven Lua template for GameGuardian with all essential functions</p>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card feature-card h-100">
                    <div class="feature-icon">
                        <i class="bi bi-sliders"></i>
                    </div>
                    <h4>Customizable</h4>
                    <p>Add multiple hacks with different types (boolean, numeric, etc.)</p>
                </div>
            </div>
            <div class="col-md-4 mb-4">
                <div class="card feature-card h-100">
                    <div class="feature-icon">
                        <i class="bi bi-download"></i>
                    </div>
                    <h4>Download Ready</h4>
                    <p>Generate and download your script with a single click</p>
                </div>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header">
                <i class="bi bi-gear"></i> Script Configuration
            </div>
            <div class="card-body">
                <ul class="nav nav-tabs" id="configTabs" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="basic-tab" data-bs-toggle="tab" data-bs-target="#basic" type="button" role="tab">Basic Settings</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="hacks-tab" data-bs-toggle="tab" data-bs-target="#hacks" type="button" role="tab">Hacks Configuration</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="advanced-tab" data-bs-toggle="tab" data-bs-target="#advanced" type="button" role="tab">Advanced</button>
                    </li>
                </ul>
                <div class="tab-content" id="configTabsContent">
                    <div class="tab-pane fade show active" id="basic" role="tabpanel">
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="libName" class="form-label">Library Name</label>
                                    <input type="text" class="form-control" id="libName" value="libil2cpp.so">
                                    <div class="form-text">The name of the library to search for (usually libil2cpp.so)</div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="authorName" class="form-label">Author Name</label>
                                    <input type="text" class="form-control" id="authorName" placeholder="Your Name">
                                    <div class="form-text">Will be included in the script header</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="hacks" role="tabpanel">
                        <div id="hacksContainer">
                            <!-- Hack items will be added here -->
                            <div class="hack-item" id="hackTemplate" style="display: none;">
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label class="form-label">Hack Name</label>
                                            <input type="text" class="form-control hack-name" placeholder="Free Shop">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label class="form-label">Class Name</label>
                                            <input type="text" class="form-control class-name" placeholder="Currency">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label class="form-label">Method Name</label>
                                            <input type="text" class="form-control method-name" placeholder="get_IsIAP">
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label class="form-label">Value Type</label>
                                            <select class="form-select value-type">
                                                <option value="boolean">Boolean</option>
                                                <option value="numeric">Numeric</option>
                                            </select>
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3">
                                            <label class="form-label">Default Value</label>
                                            <input type="text" class="form-control default-value" placeholder="false or 99999">
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <div class="mb-3 d-flex align-items-end h-100">
                                            <button type="button" class="btn btn-danger remove-hack"><i class="bi bi-trash"></i> Remove</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="text-center mt-3">
                            <button type="button" class="btn btn-success" id="addHack"><i class="bi bi-plus-circle"></i> Add Hack</button>
                        </div>
                    </div>
                    <div class="tab-pane fade" id="advanced" role="tabpanel">
                        <div class="mb-3">
                            <label for="customCode" class="form-label">Custom Code (Optional)</label>
                            <textarea class="form-control" id="customCode" rows="5" placeholder="Add any custom Lua code you want to include in the script"></textarea>
                            <div class="form-text">This code will be added at the end of the script before the menu functions</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="card mb-4">
            <div class="card-header">
                <i class="bi bi-code-slash"></i> Generated Script
            </div>
            <div class="card-body">
                <div class="mb-3">
                    <textarea class="form-control" id="generatedScript" readonly></textarea>
                </div>
                <div class="d-flex justify-content-between">
                    <button type="button" class="btn btn-primary" id="generateScript"><i class="bi bi-arrow-repeat"></i> Generate Script</button>
                    <button type="button" class="btn btn-success" id="downloadScript"><i class="bi bi-download"></i> Download Script</button>
                    <button type="button" class="btn btn-secondary" id="copyScript"><i class="bi bi-clipboard"></i> Copy to Clipboard</button>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Add first hack by default
            addHack();
            
            // Set up event listeners
            document.getElementById('addHack').addEventListener('click', addHack);
            document.getElementById('generateScript').addEventListener('click', generateScript);
            document.getElementById('downloadScript').addEventListener('click', downloadScript);
            document.getElementById('copyScript').addEventListener('click', copyScript);
            
            // Generate script when page loads to show template
            generateScript();
        });
        
        function addHack() {
            const hacksContainer = document.getElementById('hacksContainer');
            const hackTemplate = document.getElementById('hackTemplate');
            
            const newHack = hackTemplate.cloneNode(true);
            newHack.style.display = 'block';
            newHack.id = '';
            
            // Add remove button functionality
            newHack.querySelector('.remove-hack').addEventListener('click', function() {
                if (document.querySelectorAll('.hack-item:not(#hackTemplate)').length > 1) {
                    newHack.remove();
                } else {
                    alert('You need at least one hack in the script.');
                }
            });
            
            hacksContainer.appendChild(newHack);
        }
        
        function generateScript() {
            const libName = document.getElementById('libName').value || 'libil2cpp.so';
            const authorName = document.getElementById('authorName').value || 'Your Name';
            const customCode = document.getElementById('customCode').value;
            
            // Get all hacks
            const hacks = [];
            document.querySelectorAll('.hack-item:not(#hackTemplate)').forEach(hackEl => {
                const hackName = hackEl.querySelector('.hack-name').value;
                const className = hackEl.querySelector('.class-name').value;
                const methodName = hackEl.querySelector('.method-name').value;
                const valueType = hackEl.querySelector('.value-type').value;
                const defaultValue = hackEl.querySelector('.default-value').value;
                
                if (hackName && className && methodName) {
                    hacks.push({
                        name: hackName,
                        class: className,
                        method: methodName,
                        type: valueType,
                        value: defaultValue
                    });
                }
            });
            
            // Generate the script
            let script = `-- Script generated by AvelineID Auto Script Generator
-- Library: ${libName}
-- Author: ${authorName}
-- ${new Date().toLocaleDateString()}

-- Set Your Libname here
local libNameSo = "${libName}"  -- Define the library name
local info = gg.getTargetInfo() -- Get information about the target app
local APK = info.label    -- Get APK name

-- Define tables and flags for memory handling
X_X = {}  -- Store memory range start addresses
UwU = 0    -- Counter for memory ranges
LibraryStatus = 0  -- Flag for library status (0 = not found)
MemoryRanges = gg.getRangesList()  -- Get the memory ranges list

-- Check if no memory ranges are found, exit if true
if #MemoryRanges == 0 then
    print("No libraries found. Check environment.")
    gg.setVisible(true)
    os.exit()
end

-- Try to fetch memory ranges for the specified library
MemoryRanges = gg.getRangesList(libNameSo)
if #MemoryRanges == 0 then
    LibraryStatus = 2  -- Mark as split library search
    goto LIBRARY_SPLIT  -- Jump to the split library check
end

-- Loop through memory ranges to find valid range (state == "Xa")
for i, range in ipairs(MemoryRanges) do
    if range.state == "Xa" then
        UwU = UwU + 1
        X_X[UwU] = range.start  -- Store the start address of valid range
        LibrarySize = range["end"] - range.start  -- Get library size
        LibraryStatus = 1  -- Mark library as found
    end
end

-- Check if no valid library was found
if LibraryStatus == 0 then
    print(libNameSo .. " not found in Xa region.")
    gg.setVisible(true)
    os.exit()
end

-- Split library detection and handling
::LIBRARY_SPLIT::
if LibraryStatus == 2 then
    SplitApkFound = false  -- Flag for split APK detection
    MemoryRanges = gg.getRangesList()  -- Get all memory ranges again

    -- Check for "split_config" in the memory range names
    for i, range in ipairs(MemoryRanges) do
        if range.state == "Xa" and string.match(range.name, "split_config") then
            SplitApkFound = true
        end
    end

    -- Handle split APK if found
    if SplitApkFound then
        SplitSizes = {}
        SplitCount = 0
        for i, range in ipairs(MemoryRanges) do
            if range.state == "Xa" then
                SplitCount = SplitCount + 1
                SplitSizes[SplitCount] = range["end"] - range.start  -- Store size of each split
            end
        end

        -- Find the largest split
        if SplitCount > 0 then
            MaxSplitSize = math.max(table.unpack(SplitSizes))
            -- Iterate to find the largest split size
            for i, range in ipairs(MemoryRanges) do
                if range.state == "Xa" and (range["end"] - range.start) == MaxSplitSize then
                    UwU = UwU + 1
                    X_X[UwU] = range.start  -- Store start address of largest split
                    LibrarySize = range["end"] - range.start
                    LibraryStatus = 1
                end
            end
        end
    else
        print("No split_config lib found.")
        gg.setVisible(true)
        os.exit()
    end
end

-- Final library check
if LibraryStatus ~= 1 then
    print("Correct lib not found.")
    gg.setVisible(true)
    os.exit()
end

-- Arm Patch
-- Table to store original values for specific offsets
local Original = {}

-- Function to record the original values at a specific offset range
local function RecordOriginalValue(offset)
    local REV = gg.getValues((function(R)
        for _, x in ipairs({offset}) do -- Set Offset 
            for i = 0, 16, 4 do
                R[#R + 1] = {address = X_X[UwU] + x + i, flags = 4}
            end
        end
        return R
    end)({}))

    -- Store the original values in the Original table using the same offset key
    Original[offset] = REV
end

-- Function to revert the values back to the original state for a specific offset
local function RevertValue(offset)
    local originalValues = Original[offset]
    if originalValues then
        gg.setValues(originalValues)  -- Revert to the original values
        gg.toast("Hack [OFF]")
        gg.sleep(1000)
        gg.toast("--( X_X )--")
    else
        gg.alert("⛔ ERROR : ORIGINAL VALUE NOT FOUND ⛔")
    end
end

-- Inject assembly values
local function injectAssembly(offset, value)
    local addr = X_X[UwU] + offset
    if value == true then
        gg.setValues({
            {address = addr, flags = 4, value = "h200080D2"}, -- MOV X0, #0x1
            {address = addr + 0x4, flags = 4, value = "hC0035FD6"} -- RET
        })
    elseif value == false then
        gg.setValues({
            {address = addr, flags = 4, value = "h000080D2"}, -- MOV X0, #0x0
            {address = addr + 0x4, flags = 4, value = "hC0035FD6"} -- RET
        })
    elseif value <= 0xFFFF then
        gg.setValues({
            {address = addr, flags = 4, value = string.format("~A8 MOV W0, #%d", value)},
            {address = addr + 0x4, flags = 4, value = "~A8 RET"}
        })
    else
        gg.setValues({
            {address = addr, flags = 4, value = string.format("~A8 MOV W0, #%d", value & 0xFFFF)},
            {address = addr + 0x4, flags = 4, value = string.format("~A8 MOVK W0, #%d, LSL #16", (value >> 16) & 0xFFFF)},
            {address = addr + 0x8, flags = 4, value = "~A8 RET"}
        })
    end
end
-- Set up target game environment for memory patching
::GET_READY::
gg.setVisible(false)  -- Hide the GameGuardian UI
for i = 20, 100, 20 do
    gg.sleep(300)
    gg.toast(i .. "%")
end
local ti = gg.getTargetInfo()  -- Get target info (for 64-bit vs 32-bit detection)
local p_size = ti.x64 and 0x8 or 0x4  -- Determine pointer size

-- Define path to save offsets
local offsetFilePath = gg.EXT_FILES_DIR .. "/" .. APK .. "_Offsets.lua"

-- Functions to retrieve and manipulate memory values
local function getvalue(address, ggType)  -- Get memory value from a specified address
    return gg.getValues({{address = address, flags = ggType}})[1].value
end

local function ptr(address)  -- Get pointer value (32-bit or 64-bit)
    return getvalue(address, ti.x64 and gg.TYPE_QWORD or gg.TYPE_DWORD)
end

local function CString(address, str)  -- Compare string at address with the target string
    local bytes = gg.bytes(str)
    for i = 1, #bytes do
        if getvalue(address + i - 1, gg.TYPE_BYTE) & 0xFF ~= bytes[i] then
            return false
        end
    end
    return getvalue(address + #bytes, gg.TYPE_BYTE) == 0
end

-- Function to get a method from Il2Cpp by class and method name
local function GetIl2CppMethod(clazz, method)
    local result = {}
    gg.clearResults()
    gg.setRanges(gg.REGION_C_ALLOC | gg.REGION_ANONYMOUS | gg.REGION_OTHER | gg.REGION_CODE_APP | gg.REGION_C_BSS | gg.REGION_C_DATA)
    gg.searchNumber(string.format("Q 00 '%s' 00", method), gg.TYPE_BYTE)
    local count = gg.getResultsCount()

    if count > 0 then
        gg.refineNumber(method:byte(), gg.TYPE_BYTE)
        local t = gg.getResults(count)
        gg.searchPointer(0)
        t = gg.getResults(count)
        for _, v in ipairs(t) do
            if CString(ptr(ptr(v.address + p_size) + p_size * 2), clazz) then
                table.insert(result, {
                    address = ptr(v.address - p_size * 2),
                    name = string.format("%s :: %s", clazz, method),
                    flags = v.flags
                })
            end
        end
        gg.clearResults()
    end

    return result
end

-- Save and load offsets for methods
local function saveOffsetsToFile(offsets)
    local file = io.open(offsetFilePath, "w")
    file:write("-- "..APK.."\n-- Version : "..info.versionName.."\n")
    file:write("-- Script By : ${authorName} \n")
    file:write("-- "..string.rep("═─═", 5).."\n")
    for method, offset in pairs(offsets) do
        file:write(string.format("%s = %s\n", method, offset))
    end
    file:close()
end

local function loadOffsetsFromFile()
    local offsets = {}
    local file = io.open(offsetFilePath, "r")
    if file then
        for line in file:lines() do
            local method, offset = line:match("^(.-) = (.-)$")
            if method and offset then
                offsets[method] = offset
            end
        end
        file:close()
    end
    return offsets
end

-- Search for methods and save offsets if not already saved
local offsets = loadOffsetsFromFile()
if not next(offsets) then
    local Search = {`;

            // Add search items for each hack
            hacks.forEach((hack, index) => {
                script += `
        [${index + 1}] = {
            class = "${hack.class}",  -- public class ${hack.class}
            method = "${hack.method}" -- public ${hack.type === 'boolean' ? 'bool' : 'int'} ${hack.method}()
        }${index < hacks.length - 1 ? ',' : ''}`;
            });

            script += `
    }

    -- Search for each method in the search table
    for i, v in ipairs(Search) do
        gg.toast(string.format("Searching [%s :: %s] (%d/%d)", v.class, v.method, i, #Search))
        gg.sleep(1000)

        local results = GetIl2CppMethod(v.class, v.method)

        if #results > 0 then
            local offset = results[1].address - X_X[UwU]
            offsets[v.method] = string.format("0x%X", offset)
            _G[v.method] = offsets[v.method]
            gg.toast("✅ ["..v.method .. "] ✅")
        else
            offsets[v.method] = "nil"
            _G[v.method] = nil
            gg.toast("🚫 ["..v.method .. "] 🚫")
        end
        gg.sleep(1000)
    end

    saveOffsetsToFile(offsets)
else
-- If offsets are already saved, show them
local offsetDetails = {}
for method, offset in pairs(offsets) do
    table.insert(offsetDetails, string.format("%s: %s", method, offset))
    _G[method] = offset ~= "nil" and offset or nil
end

-- Generate the visual file structure
local relativePath = offsetFilePath:match("([^/]+/.+)")
local filePathStructure = "├─ 📁 " .. relativePath:gsub("/", "\n│ ├─ 📁 ")

local xXx = gg.alert(
    "🎲 Game : " .. APK ..
    "\n🪩 Offsets Saved File Found..!!" ..
    "\n" .. filePathStructure ..
    "\n" .. string.rep("─ ─", 7) ..  -- Adds a line 
    "\nOffsets : 📝\n" .. table.concat(offsetDetails, "\n"),
    "[ Start ]", nil, "[ Update ]"
)

if xXx == 3 then
    os.remove(offsetFilePath)
    goto GET_READY
end
end

-- Function to check if method offset is found, otherwise stop execution
function check(method)
    if not _G[method] then
        gg.alert("ERROR : [ "..method .. " ] Offset not found..!")
        gg.toast("⛔ This Hack Will Not Work ⛔")
        return nil
    end
    gg.toast("Hack [ON]")
    gg.sleep(1000)
    gg.toast("--( O_O )--")
    return true
end
gg.setVisible(true) -- Show Menu`;

            // Add hack functions
            hacks.forEach((hack, index) => {
                const funcPrefix = String.fromCharCode(65 + index); // A, B, C, etc.
                
                script += `


function ${funcPrefix}_ON() -- ${hack.name}

   RecordOriginalValue(${hack.method}) -- Record Value
   injectAssembly(${hack.method}, ${hack.value}) -- Patch value
   ${hack.type === 'boolean' ? `-- ${hack.value} is our edit value` : ''}
    
return true    
end


function ${funcPrefix}_OFF()

   RevertValue(${hack.method}) -- Revert (Hack Off)
    
return nil
end`;
            });

            // Add custom code if provided
            if (customCode) {
                script += `\n\n-- Custom Code\n${customCode}`;
            }

            // Add menu section
            script += `


-- Main Menu --
menuList = {`;

            // Add menu items
            hacks.forEach((hack, index) => {
                script += `
    "${hack.name}", -- ${index + 1}`;
            });

            script += `
    "EXIT", -- ${hacks.length + 1}
    
}

checkList = {`;

            // Add check list items
            hacks.forEach((hack, index) => {
                script += `
    nil, -- ${index + 1}`;
            });

            script += `
    nil, -- ${hacks.length + 1}
    
}
-- Done 😉
-- Menu Function
function menu()
    tsu = gg.multiChoice(menuList, checkList, "━━━━[ " .. APK .. " ]━━━━")
    if tsu == nil then return end`;

            // Add menu options for each hack
            hacks.forEach((hack, index) => {
                const funcPrefix = String.fromCharCode(65 + index);
                
                script += `

    -- Option ${index + 1}: ${hack.name}
    if tsu[${index + 1}] ~= checkList[${index + 1}] then
        if tsu[${index + 1}] == true then
            if check("${hack.method}") then -- Check offset
                checkList[${index + 1}] = ${funcPrefix}_ON()
            else
                gg.toast("$ ( X_X ) $") -- Error Toast
            end
        else
            checkList[${index + 1}] = ${funcPrefix}_OFF()
        end
    end`;
            });

            // Add exit option
            script += `

    -- Option ${hacks.length + 1}: Exit
    if tsu[${hacks.length + 1}] == true then
        os.exit()
    end
end

-- Function to apply ARM patches
function Arm()
    O = tonumber(O)
    if O == nil then 
       return
    end
    for UwU = 1, #(X_X) do
        Dick = nil
        Dick = {}

        if type(X) ~= "table" then
            Dick[1] = {}
            Dick[2] = {}
            Dick[1].address = X_X[UwU] + O
            Dick[1].flags = 4
            if X == 0 then
                Dick[1].value = 'h000080D2'
            elseif X == 1 then
                Dick[1].value = 'h200080D2'
            else
                Dick[1].value = X
            end
            Dick[2].address = X_X[UwU] + (O + 4)
            Dick[2].flags = 4
            Dick[2].value = 'D65F03C0h'
        else
            Fuck = 0
            for Bitch = 1, #(X) do
                Dick[Bitch] = {}
                Dick[Bitch].address = X_X[UwU] + O + Fuck
                Dick[Bitch].flags = 4
                Dick[Bitch].value = tostring(X[Bitch])
                Fuck = Fuck + 4
            end
        end

        gg.setValues(Dick)
    end
end

-- Menu loop function
while true do
    if gg.isVisible(true) then
        gg.setVisible(false)
        menu()
    end
end`;

            document.getElementById('generatedScript').value = script;
        }
        
        function downloadScript() {
            const script = document.getElementById('generatedScript').value;
            const libName = document.getElementById('libName').value || 'script';
            const blob = new Blob([script], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${libName}_hack.lua`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }
        
        function copyScript() {
            const script = document.getElementById('generatedScript');
            script.select();
            document.execCommand('copy');
            
            // Show feedback
            const copyButton = document.getElementById('copyScript');
            const originalText = copyButton.innerHTML;
            copyButton.innerHTML = '<i class="bi bi-check-circle"></i> Copied!';
            setTimeout(() => {
                copyButton.innerHTML = originalText;
            }, 2000);
        }
    </script>
</body>
</html>